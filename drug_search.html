<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 修改网页标题 -->
    <title>Drug Search</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#f3f4f6',
                        accent: '#1e40af',
                        neutral: '#6b7280',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .search-focus {
                @apply focus:ring-2 focus:ring-primary/50 focus:border-primary;
            }
            .table-hover {
                @apply hover:bg-blue-50 transition-colors duration-200;
            }
            .fade-in {
                animation: fadeIn 0.5s ease-in-out;
            }
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        }
    </style>
</head>

<body class="bg-gray-50 font-sans text-gray-800 min-h-screen">
    <!-- 密码输入页面 -->
    <div id="password-container" class="flex justify-center items-center h-screen">
        <div class="bg-white p-8 rounded-xl shadow-lg">
            <h2 class="text-2xl font-bold mb-4">Please enter the password</h2>
            <input type="password" id="password-input"
                class="w-full py-3 px-5 rounded-lg border border-gray-300 shadow-sm search-focus transition-all duration-300 text-lg mb-4">
            <button id="password-button"
                class="w-full py-3 px-5 bg-primary text-white rounded-lg hover:bg-accent transition-colors">Submit</button>
            <p class="text-gray-500 text-sm mt-4">Please contact the author for the password, liuchenning1992@163.com</p>
        </div>
    </div>

    <!-- 原页面内容 -->
    <div id="content-container" class="hidden container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header section -->
        <header class="mb-8 text-center">
            <h1 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-gray-800 mb-2">Drug Search</h1>
            <p class="text-gray-600 text-lg">Targeted therapies for non-small cell lung cancer approved by NMPA</p>
        </header>

        <!-- Search box section -->
        <div class="relative mb-8 max-w-2xl mx-auto">
            <div class="relative">
                <input type="text" id="search-input" placeholder="Search by Generic Name..."
                    class="w-full py-3 px-5 pr-12 rounded-lg border border-gray-300 shadow-sm search-focus transition-all duration-300 text-lg">
                <button id="search-button"
                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-primary transition-colors">
                    <i class="fa fa-search text-xl"></i>
                </button>
            </div>
            <!-- 删除搜索提示段落 -->
        </div>

        <!-- Table section -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden transition-all duration-500">
            <div class="overflow-x-auto">
                <table class="w-full" id="drug-table">
                    <thead>
                        <tr class="bg-gray-100 text-left">
                            <th class="px-6 py-4 text-gray-700 font-bold text-lg">Generic Name</th>
                            <th class="px-6 py-4 text-gray-700 font-bold text-lg">Drug Origin</th>
                            <th class="px-6 py-4 text-gray-700 font-bold text-lg">Target</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <!-- Table content will be dynamically generated by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div id="no-results" class="hidden py-12 text-center">
                <i class="fa fa-search-minus text-4xl text-gray-300 mb-4"></i>
                <p class="text-gray-500 text-xl">No matching drugs found</p>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-12 text-center text-gray-500 text-sm">
            <p>© 2025 Drug Database | Data for reference only</p>
        </footer>
    </div>

    <script>
        // 密码验证
        const passwordInput = document.getElementById('password-input');
        const passwordButton = document.getElementById('password-button');
        const passwordContainer = document.getElementById('password-container');
        const contentContainer = document.getElementById('content-container');
        const correctPassword = 'umicmshu123';

        passwordButton.addEventListener('click', function () {
            const inputPassword = passwordInput.value;
            if (inputPassword === correctPassword) {
                passwordContainer.classList.add('hidden');
                contentContainer.classList.remove('hidden');
            } else {
                alert('Incorrect password, please try again.');
            }
        });

        // Drug data
        const drugs = [
            { genericName: "Gefitinib", origin: "Imported", target: "EGFR ex19d and L858R" },
            { genericName: "Erlotinib", origin: "Imported", target: "EGFR ex19d and L858R" },
            { genericName: "Icotinib hydrochloride", origin: "Domestic", target: "EGFR ex19d and L858R" },
            { genericName: "Afatinib", origin: "Imported", target: "EGFR ex19d and L858R" },
            { genericName: "Osimertinib", origin: "Imported", target: "EGFR ex19d and L858R" },
            { genericName: "Dacomitinib", origin: "Imported", target: "EGFR ex19d and L858R" },
            { genericName: "Almonertinib", origin: "Domestic", target: "EGFR ex19d and L858R" },
            { genericName: "Furmonertinib mesylate", origin: "Domestic", target: "EGFR ex19d and L858R" },
            { genericName: "Befotertinib Mesylate", origin: "Domestic", target: "EGFR ex19d and L858R" },
            { genericName: "Rezivertinib", origin: "Domestic", target: "EGFR ex19d and L858R" },
            { genericName: "Rilertinib Mesylate", origin: "Domestic", target: "EGFR ex19d and L858R" },
            { genericName: "Zorifertinib", origin: "Domestic", target: "EGFR ex19d and L858R" },
            { genericName: "Sunvozertinib", origin: "Domestic", target: "EGFR ex20 ins" },
            { genericName: "Crizotinib", origin: "Imported", target: "ALK" },
            { genericName: "Crizotinib ", origin: "Imported", target: "ROS1" },
            { genericName: "Ceritinib", origin: "Imported", target: "ALK" },
            { genericName: "Alectinib", origin: "Imported", target: "ALK" },
            { genericName: "Ensartinib", origin: "Domestic", target: "ALK" },
            { genericName: "Brigatinib", origin: "Imported", target: "ALK" },
            { genericName: "Lorlatinib", origin: "Imported", target: "ALK" },
            { genericName: "Iruplinalkib", origin: "Domestic", target: "ALK" },
            { genericName: "Envonalkib", origin: "Domestic", target: "ALK" },
            { genericName: "Dabrafenib mesylate plus Trametinib Dimethyl Sulfoxide", origin: "Imported", target: "BRAF V600E" },
            { genericName: "Fulzerasib", origin: "Domestic", target: "KRAS G12C" },
            { genericName: "Garsorasib", origin: "Domestic", target: "KRAS G12C" },
            { genericName: "Entrectinib", origin: "Imported", target: "ROS1" },
            { genericName: "Unecritinib", origin: "Domestic", target: "ROS1" },
            { genericName: "Repotrectinib", origin: "Imported", target: "ROS1" },
            { genericName: "Taletrectinib", origin: "Domestic", target: "ROS1" },
            { genericName: "Pralsetinib", origin: "Imported", target: "RET" },
            { genericName: "Selpercatinib", origin: "Imported", target: "RET" },
            { genericName: "Savolitinib", origin: "Domestic", target: "MET ex14" },
            { genericName: "Glumetinib", origin: "Domestic", target: "MET ex14" },
            { genericName: "Vebreltinib", origin: "Domestic", target: "MET ex14" },
            { genericName: "Tepotinib hydrochloride hydrate", origin: "Imported", target: "MET ex14" },
            { genericName: "Capmatinib Hydrochloride", origin: "Imported", target: "MET ex14" },
            { genericName: "Trastuzumab Deruxtecan", origin: "Imported", target: "HER2" },
            { genericName: "Mobocertinib succinate", origin: "Imported", target: "EGFR ex20 ins" }
        ];

        // DOM elements
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');
        const tableBody = document.getElementById('table-body');
        const noResults = document.getElementById('no-results');
        // 删除对搜索提示元素的引用
        // const searchHint = document.getElementById('search-hint');

        // Initialize the table
        function initTable() {
            renderTable(drugs);
            setupEventListeners();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Search button click event
            searchButton.addEventListener('click', performSearch);

            // Enter key event for input field
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });

            // Real-time search as user types
            searchInput.addEventListener('input', performSearch);
        }

        // Perform search
        function performSearch() {
            const searchTerm = searchInput.value.trim().toLowerCase();

            if (searchTerm === '') {
                // If search term is empty, show all drugs
                renderTable(drugs);
                // 删除更新搜索提示的代码
                // searchHint.textContent = 'Search results will be displayed in real-time';
                noResults.classList.add('hidden');
                return;
            }

            // Filter matching drugs
            const filteredDrugs = drugs.filter(drug =>
                drug.genericName.toLowerCase().includes(searchTerm)
            );

            // 删除更新搜索提示的代码
            // searchHint.textContent = `Found ${filteredDrugs.length} matching results`;

            // Render results
            renderTable(filteredDrugs);

            // Show or hide no results message
            if (filteredDrugs.length === 0) {
                noResults.classList.remove('hidden');
            } else {
                noResults.classList.add('hidden');
            }
        }

        // Render table
        function renderTable(drugsList) {
            // Clear table
            tableBody.innerHTML = '';

            // Add new rows
            drugsList.forEach((drug, index) => {
                const row = document.createElement('tr');
                row.className = `border-b border-gray-200 table-hover fade-in`;
                row.style.animationDelay = `${index * 0.05}s`;

                // Generic Name cell
                const nameCell = document.createElement('td');
                nameCell.className = 'px-6 py-4 font-medium';
                const link = document.createElement('a');
                link.href = `drug_details.html?name=${encodeURIComponent(drug.genericName)}`;
                link.textContent = drug.genericName;
                nameCell.appendChild(link);

                // Drug Origin cell
                const originCell = document.createElement('td');
                originCell.className = 'px-6 py-4';

                // Set different styles based on drug origin
                if (drug.origin === 'Imported') {
                    originCell.innerHTML = '<span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">Imported</span>';
                } else {
                    originCell.innerHTML = '<span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">Domestic</span>';
                }

                // Target cell
                const targetCell = document.createElement('td');
                targetCell.className = 'px-6 py-4';
                targetCell.innerHTML = drug.target;

                // Add cells to row
                row.appendChild(nameCell);
                row.appendChild(originCell);
                row.appendChild(targetCell);

                // Add row to table
                tableBody.appendChild(row);
            });
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', initTable);
    </script>
</body>

</html>
